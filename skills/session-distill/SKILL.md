---
name: session-distill
description: Distill recurring context from AI agent sessions into CLAUDE.md. Use after multiple agent sessions to generate a persistent memory file that prevents re-explaining the same context every session. Supports Claude Code, Aider, and any piped chatlog. Do not use for summarizing a single session or for non-agent text files.
license: MIT
compatibility: Requires Node.js 18+. Reads ~/.claude/projects/ for Claude Code, .aider.chat.history.md for Aider.
metadata:
  author: safetnsr
  version: "0.1.0"
  npm: "@safetnsr/session-distill"
  github: "https://github.com/safetnsr/session-distill"
---

# session-distill

Generate CLAUDE.md from recurring patterns across agent sessions. Zero install.

## standard workflow

1. Run `npx @safetnsr/session-distill --top 10` — preview top recurring patterns
2. Run `npx @safetnsr/session-distill --diff` — preview CLAUDE.md changes
3. Run `npx @safetnsr/session-distill --out CLAUDE.md` — write to file
4. Review generated CLAUDE.md — remove anything incorrect
5. Commit CLAUDE.md to repo

## key flags

```bash
npx @safetnsr/session-distill                    # auto-detect, stdout
npx @safetnsr/session-distill --out CLAUDE.md    # write to file
npx @safetnsr/session-distill --top 10           # preview patterns only
npx @safetnsr/session-distill --diff             # show what would change
npx @safetnsr/session-distill --json             # machine-readable output
cat chat.md | npx @safetnsr/session-distill      # pipe any chatlog
```

## json output shape

```json
{
  "sessions_analyzed": 12,
  "patterns": [
    { "text": "typescript", "sessionCount": 8, "totalSessions": 12, "confidence": 0.7 }
  ],
  "claude_md": "# CLAUDE.md (generated by session-distill...)\\n..."
}
```

## pair with vibe-check and ai-ready

Run session-distill to build your CLAUDE.md. Run ai-ready before editing. Run vibe-check after.
